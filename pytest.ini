# pytest.ini
[pytest]
minversion = 7.0

pythonpath =
    src
    .

testpaths =
    tests
    examples/demo_qa/tests

python_files =
    test_*.py
    *_test.py

python_classes =
    Test*
python_functions =
    test_*

addopts =
    -ra
    --strict-config
    --strict-markers

norecursedirs =
    .git
    .hg
    .svn
    .tox
    .pytest_cache
    .mypy_cache
    .ruff_cache
    __pycache__
    build
    dist
    htmlcov
    .venv
    venv
    node_modules

markers =
    regression: regression tests (can be excluded via -m "not regression")
    slow: slow tests (exclude via -m "not slow")
    integration: integration tests (providers / IO / external deps)
    e2e: end-to-end scenarios
    known_bad: real-world TDD cases that are allowed to fail (excluded from CI by default)

# Удобные дефолты для логов в CI и локально
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Чтобы xfail не проходили "тихо" если внезапно начали проходить
xfail_strict = true

# Часто полезно подсветить потенциальные проблемы
filterwarnings =
    error::DeprecationWarning:fetchgraph.*
    error::PendingDeprecationWarning:fetchgraph.*
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
